<header
  class="header-enhanced {{ if site.Params.navbar_fixed }}sticky top-0{{ end }} z-50">
  <nav class="navbar container">
    <!-- logo -->
    <div class="order-0">
      <!-- navbar brand/logo -->
      <a class="navbar-brand-enhanced block scale-[.70] lg:scale-[.80] transition-transform hover:scale-[.75] lg:hover:scale-[.85]" href="{{ site.Home.RelPermalink }}">
        {{ partial "logo" }}
      </a>
    </div>
    <!-- navbar toggler -->
    <input id="nav-toggle" type="checkbox" class="hidden" />
    <label
      for="nav-toggle"
      class="nav-toggler-enhanced order-3 cursor-pointer flex items-center lg:hidden text-itcs_dark lg:order-1 ml-2">
      <svg id="show-button" class="h-7 w-7 fill-current block transition-transform hover:scale-110" viewBox="0 0 20 20">
        <title>Menu Open</title>
        <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
      </svg>
      <svg id="hide-button" class="h-7 w-7 fill-current hidden transition-transform hover:scale-110" viewBox="0 0 20 20">
        <title>Menu Close</title>
        <polygon
          points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2"
          transform="rotate(45 10 10)"></polygon>
      </svg>
    </label>
    <!-- /navbar toggler -->

    <!-- main navbar -->
    <ul
      id="nav-menu"
      class="navbar-nav-enhanced order-3 hidden lg:flex w-full lg:order-1 lg:w-auto lg:space-x-1 lg:pb-0 xl:space-x-4 text-base font-semibold uppercase font-secondary tracking-wide">
      {{ $currentPage := . }}
      {{ range site.Menus.main }}
        {{ $menuURL := .URL | absLangURL }}
        {{ $pageURL:= $currentPage.Permalink | absLangURL }}
        {{ $active := eq $menuURL $pageURL }}
        {{ if .HasChildren }}
          <li class="nav-item nav-dropdown group relative">
            <span
              class="nav-link {{ range .Children }}
                {{ $childURL := .URL | absLangURL }}
                {{ $active := eq $childURL $pageURL }}
                {{ if $active }}active{{ end }}
              {{ end }} inline-flex items-center">
              {{ .Name }}
              <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20">
                <path
                  d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
              </svg>
            </span>
            <ul
              class="nav-dropdown-list lg:group-hover:visible lg:group-hover:opacity-100">
              {{ range .Children }}
                {{ $childURL := .URL | absLangURL }}
                {{ $active := eq $childURL $pageURL }}
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link {{ if $active }}
                      active
                    {{- end -}}"
                    {{ if findRE `^http` .URL }}
                      target="_blank" rel="noopener"
                    {{ end }}
                    href="{{- if findRE `^#` .URL -}}
                      {{- if not $.IsHome -}}
                        {{- site.Home.RelPermalink -}}
                      {{- end }}
                      {{- .URL -}}
                    {{- else -}}
                      {{- .URL | relLangURL -}}
                    {{- end -}}">
                    {{ .Name }}
                  </a>
                </li>
              {{ end }}
            </ul>
          </li>
        {{ else }}
          <li class="nav-item">
            <a
              class="nav-link-enhanced {{ if $active }}active{{- end -}}"
              {{ if findRE `^http` .URL }}
                target="_blank" rel="noopener"
              {{ end }}
              href="{{- if findRE `^#` .URL -}}
                {{- if not $.IsHome -}}
                  {{- site.Home.RelPermalink -}}
                {{- end }}{{- .URL -}}
              {{- else -}}
                {{- .URL | relLangURL -}}
              {{- end -}}"
              >{{ .Name }}</a
            >
          </li>
        {{ end }}
      {{ end }}
      {{ if site.Params.navigation_button.enable }}
        <li class="mt-4 inline-block lg:hidden">
          <a
            class="cta-button-mobile inline-block mb-6 rounded-lg py-3 px-6 font-bold font-secondary text-xl lg:inline-block bg-itcs_red text-white hover:bg-itcs_dark hover:text-white uppercase shadow-lg transition-all"
            href="{{ site.Params.navigation_button.link | relLangURL }}">
            <span class="fa fa-calendar-check mr-2"></span>
            {{ site.Params.navigation_button.label }}
          </a>
        </li>
      {{ end }}
    </ul>

    <div class="py-6 order-1 ml-auto flex items-center gap-3 md:gap-4 md:order-2 lg:ml-0">
      <!-- navigation btn -->
      {{ if site.Params.navigation_button.enable }}
        <a
                href="{{ site.Params.navigation_button.link | relLangURL }}"
                class="cta-button-enhanced hidden lg:inline-flex items-center rounded-lg py-2.5 px-5 font-bold font-secondary text-lg border-2 border-itcs_red bg-itcs_red text-white shadow-lg shadow-itcs_red/40 hover:bg-white hover:text-itcs_red hover:shadow-itcs_red/60 uppercase transition-all duration-300">
          <span class="fa fa-calendar-check mr-2"></span>
          {{ site.Params.navigation_button.label }}
        </a>
      {{ end }}

      <!-- phone number -->
      {{ if site.Params.phone_number.enable }}
        <a
                href="{{ site.Params.phone_number.link | safeURL }}"
                class="phone-link-enhanced flex items-center text-lg md:text-xl lg:text-2xl font-bold text-itcs_dark hover:text-itcs_red transition-colors duration-300">
          <span class="fa fa-phone mr-2 text-itcs_red"></span>
          <span class="hidden sm:inline">{{ site.Params.phone_number.label }}</span>
        </a>
      {{ end }}
    </div>
  </nav>
</header>
